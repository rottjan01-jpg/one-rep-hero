<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>One Rep Hero</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#0d1117; color:#fff; }
    header { padding:1rem; text-align:center; background:#161b22; font-size:1.5rem; font-weight:bold; }
    .tabbar { position:fixed; bottom:0; left:0; right:0; display:flex; background:#161b22; }
    .tabbar button { flex:1; padding:1rem; border:none; background:none; color:#fff; font-size:1rem; }
    .screen { display:none; padding:1rem; }
    .active { display:block; }
    .exercise-btn { display:block; width:100%; padding:0.8rem; margin:0.5rem 0; background:#238636; border:none; border-radius:8px; color:#fff; font-size:1rem; }
    .exercise-log { margin-left:1rem; font-size:0.85rem; color:#ccc; }
    .summary { background:#161b22; padding:1rem; border-radius:8px; margin:1rem 0; }
    .close-btn { background:#da3633; border:none; color:#fff; padding:0.5rem 1rem; border-radius:5px; }
  </style>
</head>
<body>
  <header>One Rep Hero</header>

  <div id="home" class="screen active">
    <h2>Welcome, Hero!</h2>
    <p>Total Workouts: <span id="totalWorkouts">0</span></p>
    <p><em>"Strength is earned one rep at a time."</em></p>
    <button onclick="startWorkout()">Start Workout</button>
  </div>

  <div id="workout" class="screen">
    <h2 id="workoutTitle">Workout</h2>
    <input type="text" id="customTitle" placeholder="Enter workout title" />
    <div id="exerciseList"></div>
    <button onclick="finishWorkout()">Finish Workout</button>
    <div id="timer">
      <p>Time: <span id="timeDisplay">0:00</span></p>
      <button onclick="startTimer()">Start</button>
      <button onclick="pauseTimer()">Pause</button>
      <button onclick="resetTimer()">Reset</button>
    </div>
  </div>

  <div id="archive" class="screen">
    <h2>Archive</h2>
    <input type="text" id="filterExercise" placeholder="Filter by exercise" oninput="renderArchive()" />
    <div id="archiveList"></div>
  </div>

  <div id="profile" class="screen">
    <h2>Profile</h2>
    <input type="text" id="firstName" placeholder="First Name" />
    <input type="text" id="lastName" placeholder="Last Name" />
    <button onclick="saveProfile()">Save Profile</button>
    <p id="profileDisplay"></p>
  </div>

  <div class="tabbar">
    <button onclick="showScreen('home')">Home</button>
    <button onclick="showScreen('workout')">Workout</button>
    <button onclick="showScreen('archive')">Archive</button>
    <button onclick="showScreen('profile')">Profile</button>
  </div>

<script>
let workouts = JSON.parse(localStorage.getItem("workouts")||"[]");
let timer, seconds=0, running=false;

function showScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function startWorkout(){
  document.getElementById("exerciseList").innerHTML="";
  showScreen('workout');
}

function addExercise(name){
  let list=document.getElementById("exerciseList");
  let btn=document.createElement("button");
  btn.className="exercise-btn";
  btn.textContent=name;
  btn.onclick=()=>logSet(name, btn);
  list.appendChild(btn);
}

function logSet(exercise, btn){
  let reps=prompt("Reps?");
  let weight=prompt("Weight?");
  let log=document.createElement("div");
  log.className="exercise-log";
  log.textContent=`${exercise}: ${reps} reps @ ${weight}kg`;
  btn.insertAdjacentElement("afterend", log);
}

function finishWorkout(){
  let title=document.getElementById("customTitle").value||"Untitled Workout";
  workouts.push({title, date:new Date().toLocaleString()});
  localStorage.setItem("workouts", JSON.stringify(workouts));
  alert("Workout saved!");
  showScreen('home');
  renderArchive();
}

function renderArchive(){
  let filter=document.getElementById("filterExercise").value.toLowerCase();
  let list=document.getElementById("archiveList");
  list.innerHTML="";
  workouts.filter(w=>w.title.toLowerCase().includes(filter)).forEach(w=>{
    let div=document.createElement("div");
    div.textContent=`${w.title} - ${w.date}`;
    list.appendChild(div);
  });
  document.getElementById("totalWorkouts").textContent=workouts.length;
}

function startTimer(){
  if(!running){
    running=true;
    timer=setInterval(()=>{
      seconds++;
      document.getElementById("timeDisplay").textContent=formatTime(seconds);
    },1000);
  }
}

function pauseTimer(){
  clearInterval(timer);
  running=false;
}

function resetTimer(){
  clearInterval(timer);
  running=false;
  seconds=0;
  document.getElementById("timeDisplay").textContent="0:00";
}

function formatTime(sec){
  let m=Math.floor(sec/60);
  let s=sec%60;
  return `${m}:${s.toString().padStart(2,"0")}`;
}

function saveProfile(){
  let fn=document.getElementById("firstName").value;
  let ln=document.getElementById("lastName").value;
  localStorage.setItem("profile", JSON.stringify({fn, ln}));
  renderProfile();
}

function renderProfile(){
  let p=JSON.parse(localStorage.getItem("profile")||"{}");
  document.getElementById("profileDisplay").textContent=`${p.fn||""} ${p.ln||""}`;
}

renderProfile();
renderArchive();

// předpřipravené cviky
["Bench Press","Squat","Deadlift","Overhead Press","Pull-ups"].forEach(addExercise);
</script>
</body>
</html>